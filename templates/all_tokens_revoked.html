<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/tailwind.css">
    <title>All Tokens Revoked - Oauth Contacts and Calendar Exporter</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 700px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        .container {
            background-color: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
        }
        .success-icon {
            color: #4caf50;
            font-size: 5em;
            margin-bottom: 20px;
        }
        h1 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        .subtitle {
            color: #666;
            font-size: 16px;
            margin-bottom: 30px;
        }
        .success-section {
            background-color: #e8f5e8;
            padding: 25px;
            border-radius: 8px;
            margin: 25px 0;
            border-left: 4px solid #4caf50;
            text-align: left;
        }
        .impact-section {
            background-color: #ffebee;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #f44336;
            text-align: left;
        }
        .impact-section h3 {
            color: #c62828;
            margin-top: 0;
        }
        .stats-section {
            background-color: #e3f2fd;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #2196f3;
            text-align: left;
        }
        .stats-section h3 {
            color: #1976d2;
            margin-top: 0;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        .stat-item {
            text-align: center;
            padding: 15px;
            background-color: rgba(255,255,255,0.7);
            border-radius: 6px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 5px;
        }
        .stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
        }
        .button {
            background-color: #1a73e8;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            margin: 10px;
        }
        .button:hover {
            background-color: #1557b0;
            transform: translateY(-1px);
        }
        .button-secondary {
            background-color: #6c757d;
        }
        .button-secondary:hover {
            background-color: #545b62;
        }
        .button-success {
            background-color: #4caf50;
        }
        .button-success:hover {
            background-color: #388e3c;
        }
        .what-happened {
            background-color: #fff3e0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #ff9800;
            text-align: left;
        }
        .what-happened h3 {
            color: #f57c00;
            margin-top: 0;
        }
        .what-happened ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .what-happened li {
            margin: 8px 0;
            color: #666;
        }
        .security-note {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #e0e0e0;
            text-align: left;
        }
        .cleanup-list {
            background-color: rgba(255,255,255,0.8);
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .cleanup-list ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .cleanup-list li {
            margin: 6px 0;
            color: #666;
        }
    </style>
</head>
<body>
    <div class="container max-w-3xl mx-auto bg-white p-6 md:p-10 rounded-lg shadow text-center">
        <div class="success-icon">üßπ</div>
        <h1>All Tokens Revoked</h1>
        <div class="subtitle">Complete cleanup: All export tokens for your account have been permanently disabled</div>

        <div class="success-section">
            <h3>‚úÖ Mass Revocation Complete</h3>
            <p>All export tokens associated with your account have been successfully revoked and removed from the system. This was a comprehensive cleanup operation that ensures no export URLs remain active.</p>
        </div>

        <div class="stats-section">
            <h3>üìä Cleanup Summary</h3>
            <p>Here's what was cleaned up during this operation:</p>
            <div class="stats-grid">
                <div class="stat-item">
                    <div class="stat-number">{{ revoked_count }}</div>
                    <div class="stat-label">Tokens Revoked</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ revoked_count * 2 }}</div>
                    <div class="stat-label">URLs Disabled</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ total_access_count }}</div>
                    <div class="stat-label">Total Past Uses</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">{{ user_email }}</div>
                    <div class="stat-label">Account</div>
                </div>
            </div>
        </div>

        <div class="impact-section">
            <h3>üö´ What's Now Disabled</h3>
            <p>The following types of export URLs are no longer functional:</p>
            
            <div class="cleanup-list">
                <strong>üìÖ Calendar Exports (.ics):</strong>
                <ul>
                    <li>All calendar export URLs now return errors</li>
                    <li>Previously shared calendar feeds will stop working</li>
                    <li>Bookmarked calendar URLs need to be updated</li>
                </ul>
            </div>
            
            <div class="cleanup-list">
                <strong>üë• Contacts Exports (.csv):</strong>
                <ul>
                    <li>All contacts export URLs now return errors</li>
                    <li>Automated contact sync systems will fail</li>
                    <li>Downloaded CSV links need to be refreshed</li>
                </ul>
            </div>
        </div>

        <div class="what-happened">
            <h3>üîÑ Technical Details</h3>
            <ul>
                <li><strong>Database Cleanup:</strong> All tokens permanently deleted from the database</li>
                <li><strong>Immediate Effect:</strong> All export URLs disabled instantly across all systems</li>
                <li><strong>Security Reset:</strong> Complete access reset for your account's export functionality</li>
                <li><strong>Data Safety:</strong> Your Google account data is now completely protected from export URL access</li>
                <li><strong>Clean Slate:</strong> Ready for creating fresh, new export tokens when needed</li>
            </ul>
        </div>

        <div class="security-note">
            <h3>üîí Why Use Mass Revocation?</h3>
            <p>Mass token revocation is useful in several scenarios:</p>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                <div style="padding: 15px; background-color: #e8f5e8; border-radius: 6px; border-left: 3px solid #4caf50;">
                    <strong>üõ°Ô∏è Security Concern</strong><br>
                    <small>When you suspect multiple tokens might be compromised</small>
                </div>
                <div style="padding: 15px; background-color: #fff3e0; border-radius: 6px; border-left: 3px solid #ff9800;">
                    <strong>üßπ Clean Slate</strong><br>
                    <small>Starting fresh with a completely clean token environment</small>
                </div>
                <div style="padding: 15px; background-color: #e3f2fd; border-radius: 6px; border-left: 3px solid #2196f3;">
                    <strong>üìã Audit Compliance</strong><br>
                    <small>Meeting security audit requirements for access cleanup</small>
                </div>
                <div style="padding: 15px; background-color: #fce4ec; border-radius: 6px; border-left: 3px solid #e91e63;">
                    <strong>üîÑ System Migration</strong><br>
                    <small>Preparing for system changes or account transfers</small>
                </div>
            </div>
        </div>

        <div style="background-color: #e8f5e8; padding: 20px; border-radius: 8px; margin: 25px 0; text-align: left;">
            <h3 style="color: #2e7d32; margin-top: 0;">üöÄ Ready for Fresh Start</h3>
            <p>Your export system is now completely clean. When you're ready to create new export URLs:</p>
            <ul>
                <li><strong>Fresh Tokens:</strong> New tokens will have clean access histories</li>
                <li><strong>Better Security:</strong> You can set appropriate expiration times</li>
                <li><strong>Full Control:</strong> You decide exactly which data to make exportable</li>
                <li><strong>Proper Management:</strong> Use the management interface to monitor new tokens</li>
            </ul>
        </div>

        <div style="margin-top: 30px;">
            <a href="/oauth" class="button button-success">üîë Create New Token</a>
            <a href="/" class="button button-secondary">üè† Back to Home</a>
        </div>

        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
            <div style="background-color: #f8f9fa; padding: 15px; border-radius: 6px; text-align: left; font-size: 14px;">
                <h4 style="margin-top: 0; color: #333;">üí° Pro Tip</h4>
                <p style="margin-bottom: 0; color: #666;">
                    After mass revocation, consider creating tokens with shorter expiration times for better security. 
                    You can always create new tokens as needed, and the OAuth flow makes it quick and easy. 
                    Regular token rotation is a security best practice.
                </p>
            </div>
        </div>
    </div>
</body>
</html>